# Deployment Guide - Maze Adventure Game

Complete guide for packaging and distributing your game to end users.

## Table of Contents
1. [Pre-Deployment Checklist](#pre-deployment-checklist)
2. [Building Executables](#building-executables)
3. [Creating Installers](#creating-installers)
4. [Distribution Packages](#distribution-packages)
5. [Platform-Specific Instructions](#platform-specific-instructions)
6. [Digital Distribution](#digital-distribution)
7. [Updates and Versioning](#updates-and-versioning)

---

## Pre-Deployment Checklist

### Testing
- [ ] Run all tests: `python test_game.py`
- [ ] Verify structure: `python verify_structure.py`
- [ ] Play test all features
- [ ] Test on clean machine (no Python installed)
- [ ] Test all game states (menu, playing, editor, etc.)
- [ ] Verify database creation works
- [ ] Check for memory leaks (long play sessions)
- [ ] Test save/load functionality

### Code Quality
- [ ] Remove debug print statements
- [ ] Remove test code
- [ ] Update version numbers
- [ ] Check all imports
- [ ] Verify all file paths are relative
- [ ] Review comments for sensitive information

### Assets
- [ ] Create game icon (ico/icns)
- [ ] Add splash screen (optional)
- [ ] Include README for end users
- [ ] Prepare license file
- [ ] Create change log

### Documentation
- [ ] Update README with installation for end users
- [ ] Create USER_MANUAL.md
- [ ] List system requirements
- [ ] Document known issues

---

## Building Executables

### Method 1: Automated Build (Recommended)

```bash
# Verify project structure first
python verify_structure.py

# Run tests
python test_game.py

# Build executable
python build.py
```

Output location: `dist/MazeAdventure.exe` (Windows) or `dist/MazeAdventure`

### Method 2: PyInstaller with Custom Options

#### Windows

```batch
pyinstaller ^
    --name=MazeAdventure ^
    --onefile ^
    --windowed ^
    --icon=icon.ico ^
    --add-data="maze_game.db;." ^
    --hidden-import=pygame ^
    --hidden-import=sqlite3 ^
    --clean ^
    --noconfirm
```

**Multi-file version** (faster startup):
```batch
pyinstaller ^
    --name=MazeAdventure ^
    --windowed ^
    --icon=icon.ico ^
    --add-data="maze_game.db;." ^
    --hidden-import=pygame ^
    --clean
```

#### macOS

```bash
pyinstaller \
    --name=MazeAdventure \
    --onefile \
    --windowed \
    --icon=icon.icns \
    --add-data="maze_game.db:." \
    --hidden-import=pygame \
    --hidden-import=sqlite3 \
    --clean \
    --noconfirm
```

**Create .app bundle:**
```bash
pyinstaller \
    --name=MazeAdventure \
    --windowed \
    --icon=icon.icns \
    --add-data="maze_game.db:." \
    --osx-bundle-identifier=com.yourname.mazeadventure
```

#### Linux

```bash
pyinstaller \
    --name=MazeAdventure \
    --onefile \
    --windowed \
    --add-data="maze_game.db:." \
    --hidden-import=pygame \
    --clean
```

### Method 3: Nuitka (Best Performance)

```bash
pip install nuitka

# Windows
python -m nuitka ^
    --standalone ^
    --onefile ^
    --windows-disable-console ^
    --windows-icon-from-ico=icon.ico ^
    --include-data-file=maze_game.db=maze_game.db ^
    main.py

# Linux/macOS
python -m nuitka \
    --standalone \
    --onefile \
    --include-data-file=maze_game.db=maze_game.db \
    main.py
```

### Method 4: cx_Freeze

```bash
pip install cx_Freeze

# Use setup_cxfreeze.py from INSTALLATION.md
python setup_cxfreeze.py build
```

---

## Creating Installers

### Windows - NSIS Installer

**1. Install NSIS:**
Download from https://nsis.sourceforge.io/

**2. Create `installer.nsi`:**

```nsis
; Maze Adventure Game Installer
; Generated by NSIS

!define APPNAME "Maze Adventure"
!define COMPANYNAME "Your Name"
!define DESCRIPTION "2D Maze Game with Editor"
!define VERSIONMAJOR 1
!define VERSIONMINOR 0
!define VERSIONBUILD 0

!define INSTALLSIZE 20000  ; Size in KB

RequestExecutionLevel admin
InstallDir "$PROGRAMFILES\${APPNAME}"

Name "${APPNAME}"
OutFile "MazeAdventure_Installer.exe"

Page directory
Page instfiles

Section "Install"
    SetOutPath $INSTDIR
    
    ; Copy files
    File "dist\MazeAdventure.exe"
    File "maze_game.db"
    File "README.txt"
    
    ; Create uninstaller
    WriteUninstaller "$INSTDIR\Uninstall.exe"
    
    ; Start Menu
    CreateDirectory "$SMPROGRAMS\${APPNAME}"
    CreateShortcut "$SMPROGRAMS\${APPNAME}\${APPNAME}.lnk" "$INSTDIR\MazeAdventure.exe"
    CreateShortcut "$SMPROGRAMS\${APPNAME}\Uninstall.lnk" "$INSTDIR\Uninstall.exe"
    
    ; Desktop Shortcut
    CreateShortcut "$DESKTOP\${APPNAME}.lnk" "$INSTDIR\MazeAdventure.exe"
    
    ; Registry keys
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" \
        "DisplayName" "${APPNAME}"
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" \
        "UninstallString" "$\"$INSTDIR\Uninstall.exe$\""
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" \
        "DisplayIcon" "$\"$INSTDIR\MazeAdventure.exe$\""
    WriteRegStr HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" \
        "Publisher" "${COMPANYNAME}"
    WriteRegDWORD HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}" \
        "EstimatedSize" ${INSTALLSIZE}
SectionEnd

Section "Uninstall"
    Delete "$INSTDIR\MazeAdventure.exe"
    Delete "$INSTDIR\maze_game.db"
    Delete "$INSTDIR\README.txt"
    Delete "$INSTDIR\Uninstall.exe"
    
    Delete "$SMPROGRAMS\${APPNAME}\${APPNAME}.lnk"
    Delete "$SMPROGRAMS\${APPNAME}\Uninstall.lnk"
    RMDir "$SMPROGRAMS\${APPNAME}"
    
    Delete "$DESKTOP\${APPNAME}.lnk"
    
    DeleteRegKey HKLM "Software\Microsoft\Windows\CurrentVersion\Uninstall\${APPNAME}"
    
    RMDir "$INSTDIR"
SectionEnd
```

**3. Build installer:**
```batch
makensis installer.nsi
```

### Windows - Inno Setup

**Create `setup.iss`:**

```ini
[Setup]
AppName=Maze Adventure
AppVersion=1.0
DefaultDirName={pf}\Maze Adventure
DefaultGroupName=Maze Adventure
OutputDir=dist
OutputBaseFilename=MazeAdventure_Setup
Compression=lzma2
SolidCompression=yes

[Files]
Source: "dist\MazeAdventure.exe"; DestDir: "{app}"
Source: "maze_game.db"; DestDir: "{app}"
Source: "README.txt"; DestDir: "{app}"

[Icons]
Name: "{group}\Maze Adventure"; Filename: "{app}\MazeAdventure.exe"
Name: "{commondesktop}\Maze Adventure"; Filename: "{app}\MazeAdventure.exe"

[Run]
Filename: "{app}\MazeAdventure.exe"; Description: "Launch Maze Adventure"; Flags: postinstall nowait
```

Compile with Inno Setup Compiler.

### macOS - DMG Package

**1. Create application bundle:**
```bash
pyinstaller --windowed --name="Maze Adventure" main.py
```

**2. Create DMG:**
```bash
# Install create-dmg
brew install create-dmg

# Create DMG
create-dmg \
    --volname "Maze Adventure" \
    --volicon "icon.icns" \
    --window-pos 200 120 \
    --window-size 600 400 \
    --icon-size 100 \
    --icon "Maze Adventure.app" 175 120 \
    --hide-extension "Maze Adventure.app" \
    --app-drop-link 425 120 \
    "MazeAdventure.dmg" \
    "dist/Maze Adventure.app"
```

**3. Code signing (for distribution):**
```bash
codesign --deep --force --verify --verbose --sign "Developer ID Application: Your Name" "dist/Maze Adventure.app"
```

### Linux - AppImage

**1. Install tools:**
```bash
wget https://github.com/AppImage/AppImageKit/releases/download/continuous/appimagetool-x86_64.AppImage
chmod +x appimagetool-x86_64.AppImage
```

**2. Create AppDir structure:**
```bash
mkdir -p MazeAdventure.AppDir/usr/bin
mkdir -p MazeAdventure.AppDir/usr/share/applications
mkdir -p MazeAdventure.AppDir/usr/share/icons/hicolor/256x256/apps

cp dist/MazeAdventure MazeAdventure.AppDir/usr/bin/
cp icon.png MazeAdventure.AppDir/usr/share/icons/hicolor/256x256/apps/
```

**3. Create desktop file:**
```ini
[Desktop Entry]
Name=Maze Adventure
Exec=MazeAdventure
Icon=icon
Type=Application
Categories=Game;
```

**4. Build AppImage:**
```bash
./appimagetool-x86_64.AppImage MazeAdventure.AppDir MazeAdventure-x86_64.AppImage
```

---

## Distribution Packages

### Package Contents

**Minimum:**
- Executable file
- README.txt (end-user instructions)
- LICENSE.txt

**Recommended:**
- Executable
- maze_game.db (optional, will be created)
- README.txt
- LICENSE.txt
- CHANGELOG.txt

**Full Package:**
- Executable
- Database file
- Documentation (README, manual)
- Source code (if open source)
- Assets (if customizable)

### Creating ZIP Package

**Windows:**
```batch
powershell Compress-Archive -Path dist\MazeAdventure.exe,README.txt,LICENSE.txt -DestinationPath MazeAdventure-v1.0-Windows.zip
```

**macOS/Linux:**
```bash
cd dist
zip -r MazeAdventure-v1.0-macOS.zip "Maze Adventure.app" README.txt LICENSE.txt
```

### README.txt for End Users

```
MAZE ADVENTURE GAME
===================

Version: 1.0
Developer: Your Name
Website: yourwebsite.com

HOW TO INSTALL
--------------
Windows: Double-click MazeAdventure.exe
macOS: Double-click Maze Adventure.app
Linux: Run ./MazeAdventure

CONTROLS
--------
Arrow Keys / WASD - Move
ESC - Pause / Menu
1-6 - Menu selection

SYSTEM REQUIREMENTS
-------------------
Windows: Windows 10 or higher
macOS: macOS 10.14 or higher
Linux: Ubuntu 18.04 or higher

RAM: 512 MB minimum
Storage: 100 MB free space

TROUBLESHOOTING
---------------
If the game won't start:
- Windows: Run as administrator
- macOS: Right-click â†’ Open
- Linux: chmod +x MazeAdventure

For support: support@yourwebsite.com

LICENSE
-------
[Your license here]

CREDITS
-------
Built with Python and Pygame
Maze algorithms: DFS and Prim's
```

---

## Platform-Specific Instructions

### Windows Deployment

**Antivirus Issues:**
1. Submit to Microsoft for analysis
2. Code sign with certificate ($)
3. Build on Windows Defender enabled machine
4. Use SmartScreen bypass guide

**Dependencies:**
- Visual C++ Redistributable (include or document)
- DirectX (usually pre-installed)

**Testing Platforms:**
- Windows 10 (32-bit and 64-bit)
- Windows 11
- Clean VM with no Python

### macOS Deployment

**Code Signing:**
```bash
# Get Developer ID
# Sign app
codesign --deep --force --verify --verbose --sign "Developer ID" app.app

# Verify
codesign --verify --deep --strict app.app
spctl -a -t exec -vv app.app
```

**Notarization** (for Gatekeeper):
```bash
# Create archive
ditto -c -k --keepParent "Maze Adventure.app" MazeAdventure.zip

# Submit for notarization
xcrun altool --notarize-app --file MazeAdventure.zip \
    --primary-bundle-id com.yourname.mazeadventure \
    --username your@email.com \
    --password @keychain:AC_PASSWORD

# Staple ticket
xcrun stapler staple "Maze Adventure.app"
```

**Testing Platforms:**
- macOS Catalina (10.15)
- macOS Big Sur (11.0)
- macOS Monterey (12.0)
- macOS Ventura (13.0)

### Linux Deployment

**Formats:**
1. AppImage (portable, no installation)
2. .deb package (Debian/Ubuntu)
3. .rpm package (Fedora/RHEL)
4. Flatpak (universal)
5. Snap (Ubuntu)

**Testing Distributions:**
- Ubuntu 20.04 LTS, 22.04 LTS
- Debian 11
- Fedora 36+
- Arch Linux
- Linux Mint

---

## Digital Distribution

### Itch.io

**1. Create account:** https://itch.io/

**2. Create game page:**
- Title, description, screenshots
- Upload builds for each platform
- Set price (or free)
- Add download instructions

**3. Butler CLI (for updates):**
```bash
butler push dist/MazeAdventure.exe yourname/maze-adventure:windows
butler push dist/MazeAdventure.app yourname/maze-adventure:mac
butler push dist/MazeAdventure yourname/maze-adventure:linux
```

### Steam

**Requirements:**
- Steamworks SDK integration
- $100 application fee
- Content guidelines compliance
- Age rating
- Achievement system (optional)

**Steps:**
1. Apply as Steamworks partner
2. Create app in Steamworks
3. Integrate Steam SDK
4. Submit builds
5. Store page review
6. Release

### Epic Games Store

- Submit via Epic Games Publishing
- Higher revenue share than Steam
- Strict curation process

### Microsoft Store

```bash
# Convert to MSIX
makeappx pack /d dist /p MazeAdventure.msix
```

### Mac App Store

- Requires Apple Developer Program ($99/year)
- Strict sandboxing requirements
- App Review process

---

## Updates and Versioning

### Version Numbering

Use Semantic Versioning: MAJOR.MINOR.PATCH

- **MAJOR**: Incompatible changes
- **MINOR**: New features, backward compatible
- **PATCH**: Bug fixes

Examples:
- 1.0.0 - Initial release
- 1.1.0 - Added new skins
- 1.1.1 - Fixed collision bug

### Update System

**Option 1: Manual**
- Users download new version
- Replace old executable

**Option 2: In-Game Updater**
```python
def check_for_updates():
    """Check remote server for updates."""
    import urllib.request
    import json
    
    response = urllib.request.urlopen('https://yoursite.com/version.json')
    data = json.loads(response.read())
    
    if data['version'] > CURRENT_VERSION:
        # Notify user, download, replace
        pass
```

**Option 3: Platform Updaters**
- Steam: Automatic
- Itch.io: Butler
- Microsoft Store: Automatic

### Change Log

**CHANGELOG.md:**
```markdown
# Change Log

## [1.1.0] - 2025-02-01
### Added
- New power-up system
- 3 additional character skins
- Boss battles every 5 levels

### Changed
- Improved enemy AI
- Faster maze generation

### Fixed
- Database corruption on crash
- Memory leak in editor

## [1.0.0] - 2025-01-15
- Initial release
```

---

## Final Checklist

Before release:
- [ ] All builds tested on target platforms
- [ ] Installer tested on clean machines
- [ ] Documentation complete and accurate
- [ ] License file included
- [ ] Version numbers updated everywhere
- [ ] Antivirus false positives addressed
- [ ] Screenshots/trailer created
- [ ] Store pages prepared
- [ ] Support channel established
- [ ] Backup of source code secured
- [ ] Analytics/crash reporting integrated (optional)

---

## Distribution Platforms Comparison

| Platform | Fee | Revenue Share | Best For |
|----------|-----|---------------|----------|
| Itch.io | Free | 90-100% | Indie games, pay-what-you-want |
| Steam | $100 | 70% | Maximum visibility |
| Epic | Free | 88% | Exclusive deals |
| GOG | Free | 70% | DRM-free audience |
| Microsoft Store | Free | 85-88% | Windows users |
| Direct (your site) | Hosting | 100% | Maximum control |

---

## Support and Maintenance

**Plan for:**
1. Bug reports system
2. User feedback collection
3. Crash analytics
4. Regular updates (monthly/quarterly)
5. Community management
6. Documentation updates

**Tools:**
- GitHub Issues for bug tracking
- Discord for community
- Google Forms for feedback
- Sentry for crash reporting

---

**Ready to deploy! Good luck with your release! ðŸš€**